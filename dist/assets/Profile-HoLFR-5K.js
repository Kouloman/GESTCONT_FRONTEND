import{c as u,f,r as x,R as e,L as o,U as w,d as N,e as d}from"./index-wFRW0Cer.js";import{F as b,c as h,a as v,b as l,E as m,d as s,h as y}from"./index.esm-DEY0XWA5.js";import"./index-Ch8__LMA.js";/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n=u("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g=u("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),P=h().shape({username:s().min(3,"Le nom d'utilisateur doit contenir au moins 3 caractères").required("Le nom d'utilisateur est requis"),email:s().email("Email invalide").required("L'email est requis"),currentPassword:s().when("newPassword",{is:t=>t&&t.length>0,then:s().required("Le mot de passe actuel est requis pour changer votre mot de passe")}),newPassword:s().min(6,"Le mot de passe doit contenir au moins 6 caractères").matches(/^(?=.*[a-z])(?=.*[0-9])/,"Le mot de passe doit contenir au moins une lettre et un chiffre"),confirmPassword:s().oneOf([y("newPassword"),null],"Les mots de passe doivent correspondre")}),z=()=>{const{user:t,checkAuth:p}=f(),[i,c]=x.useState(!1),E=async a=>{c(!0);try{const r={username:a.username,email:a.email};a.newPassword&&(r.password=a.newPassword),await N.put("/auth/profile",r),d.success("Profil mis à jour avec succès"),await p()}catch{d.error("Erreur lors de la mise à jour du profil")}finally{c(!1)}};return t?e.createElement("div",{className:"space-y-6"},e.createElement("div",null,e.createElement("h1",{className:"text-2xl font-bold text-gray-800"},"Profil"),e.createElement("p",{className:"text-gray-600"},"Gérez vos informations personnelles")),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 max-w-2xl animate-fadeIn"},e.createElement(b,{initialValues:{username:t.username||"",email:t.email||"",currentPassword:"",newPassword:"",confirmPassword:""},validationSchema:P,onSubmit:E},({isSubmitting:a})=>e.createElement(v,{className:"space-y-6"},e.createElement("div",{className:"space-y-4"},e.createElement("h2",{className:"text-lg font-semibold text-gray-800 border-b pb-2"},"Informations de base"),e.createElement("div",null,e.createElement("label",{htmlFor:"username",className:"form-label"},"Nom d'utilisateur"),e.createElement("div",{className:"relative"},e.createElement(l,{type:"text",id:"username",name:"username",className:"form-input pl-10"}),e.createElement(w,{size:16,className:"absolute left-3 top-3 text-gray-400"})),e.createElement(m,{name:"username",component:"div",className:"text-red-500 text-xs mt-1"})),e.createElement("div",null,e.createElement("label",{htmlFor:"email",className:"form-label"},"Email"),e.createElement("div",{className:"relative"},e.createElement(l,{type:"email",id:"email",name:"email",className:"form-input pl-10"}),e.createElement(g,{size:16,className:"absolute left-3 top-3 text-gray-400"})),e.createElement(m,{name:"email",component:"div",className:"text-red-500 text-xs mt-1"}))),e.createElement("div",{className:"space-y-4"},e.createElement("h2",{className:"text-lg font-semibold text-gray-800 border-b pb-2"},"Changer le mot de passe"),e.createElement("div",null,e.createElement("label",{htmlFor:"currentPassword",className:"form-label"},"Mot de passe actuel"),e.createElement("div",{className:"relative"},e.createElement(l,{type:"password",id:"currentPassword",name:"currentPassword",className:"form-input pl-10"}),e.createElement(n,{size:16,className:"absolute left-3 top-3 text-gray-400"})),e.createElement(m,{name:"currentPassword",component:"div",className:"text-red-500 text-xs mt-1"})),e.createElement("div",null,e.createElement("label",{htmlFor:"newPassword",className:"form-label"},"Nouveau mot de passe"),e.createElement("div",{className:"relative"},e.createElement(l,{type:"password",id:"newPassword",name:"newPassword",className:"form-input pl-10"}),e.createElement(n,{size:16,className:"absolute left-3 top-3 text-gray-400"})),e.createElement(m,{name:"newPassword",component:"div",className:"text-red-500 text-xs mt-1"})),e.createElement("div",null,e.createElement("label",{htmlFor:"confirmPassword",className:"form-label"},"Confirmer le nouveau mot de passe"),e.createElement("div",{className:"relative"},e.createElement(l,{type:"password",id:"confirmPassword",name:"confirmPassword",className:"form-input pl-10"}),e.createElement(n,{size:16,className:"absolute left-3 top-3 text-gray-400"})),e.createElement(m,{name:"confirmPassword",component:"div",className:"text-red-500 text-xs mt-1"}))),e.createElement("div",{className:"pt-2 flex justify-end"},e.createElement("button",{type:"submit",disabled:i||a,className:"btn btn-primary min-w-[150px] flex items-center justify-center"},i?e.createElement(o,{size:"small"}):"Enregistrer"))))),e.createElement("div",{className:"bg-white rounded-lg shadow-sm p-6 max-w-2xl animate-fadeIn"},e.createElement("h2",{className:"text-lg font-semibold text-gray-800 mb-4"},"Informations du compte"),e.createElement("div",{className:"space-y-3"},e.createElement("div",{className:"flex"},e.createElement("span",{className:"text-sm font-medium text-gray-500 w-40"},"Rôle:"),e.createElement("span",{className:"text-sm"},t.role==="admin"?"Administrateur":"Utilisateur")),e.createElement("div",{className:"flex"},e.createElement("span",{className:"text-sm font-medium text-gray-500 w-40"},"Autorisations:"),e.createElement("div",null,t.role==="admin"?e.createElement("span",{className:"text-sm"},"Toutes les autorisations"):e.createElement("div",{className:"text-sm"},t.permissions&&t.permissions.length>0?t.permissions.map((a,r)=>e.createElement("span",{key:r,className:"inline-block bg-blue-100 text-blue-800 text-xs px-2 py-1 rounded-full mr-2 mb-2"},a)):e.createElement("span",null,"Aucune autorisation spécifique"))))))):e.createElement(o,{fullScreen:!0})};export{z as default};
